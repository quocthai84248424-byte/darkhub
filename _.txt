--[[
    DARK HUB by ilovedog
    Dead Rail Ultimate Edition - V14 (ESP RECOVERY)
    Status: FULL FEATURES + ENCRYPTED
]]

local _0xL = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local _0xS = {game:GetService("HttpService"), game:GetService("TeleportService"), game:GetService("RunService"), game:GetService("VirtualUser")}

local Config = {
    BringItem = false, SelectedBring = "None",
    AutoFarmBond = false, AutoFarmMoney = false,
    FarmSpeed = 150, FakeName = false,
    SilentAim = false, Noclip = false, AntiAFK = false,
    -- ESP CONFIG
    ESP_Zombie = false, ESP_Werewolf = false, ESP_Vampire = false, ESP_Bandit = false, ESP_Items = false
}

local _0xM = {
    ["Vàng"] = "Gold", ["Bạc"] = "Silver", ["Súng"] = "Gun", ["Rìu"] = "Axe", 
    ["Kiếm"] = "Sword", ["Than"] = "Coal", ["Bom"] = "Bomb", ["Mặt nạ"] = "Mask", 
    ["Dầu của boss Tesla"] = "TeslaOil"
}

local _0xP = game:GetService("Players").LocalPlayer
local _0xC = workspace.CurrentCamera

-- [ESP CORE FUNCTION]
local function createESP(part, color, name)
    if part:FindFirstChild("VOID_ESP") then return end
    local bg = Instance.new("BillboardGui", part)
    bg.Name = "VOID_ESP"
    bg.AlwaysOnTop = true
    bg.Size = UDim2.new(0, 50, 0, 20)
    local txt = Instance.new("TextLabel", bg)
    txt.Size = UDim2.new(1, 0, 1, 0)
    txt.BackgroundTransparency = 1
    txt.Text = name
    txt.TextColor3 = color
    txt.TextStrokeTransparency = 0
    txt.TextSize = 11
end

-- [WINDOW]
local Window = _0xL:CreateWindow({
   Name = "DARK HUB :: VOID",
   LoadingTitle = "Restoring Visual Protocols...",
   KeySystem = true,
   KeySettings = { Title = "Security Check", Note = "Key: AUTOCLICLFULL22", Key = {"AUTOCLICLFULL22"} }
})

local TabMain = Window:CreateTab("Main", "home")
local TabFarm = Window:CreateTab("Farm", "bolt")
local TabCB = Window:CreateTab("Combat", "target")
local TabVS = Window:CreateTab("Visuals", "eye") -- Tab ESP của bro đây!
local TabST = Window:CreateTab("Settings", "settings")

-- [TAB: VISUALS]
TabVS:CreateToggle({Name = "ESP Items (Bond/Note)", CurrentValue = false, Callback = function(v) Config.ESP_Items = v end})
TabVS:CreateToggle({Name = "ESP Zombie (Green)", CurrentValue = false, Callback = function(v) Config.ESP_Zombie = v end})
TabVS:CreateToggle({Name = "ESP Werewolf (Red)", CurrentValue = false, Callback = function(v) Config.ESP_Werewolf = v end})
TabVS:CreateToggle({Name = "ESP Vampire (White)", CurrentValue = false, Callback = function(v) Config.ESP_Vampire = v end})
TabVS:CreateToggle({Name = "ESP Bandit (Yellow)", CurrentValue = false, Callback = function(v) Config.ESP_Bandit = v end})

-- [TAB: MAIN / FARM / COMBAT (GIỮ NGUYÊN)]
TabMain:CreateToggle({Name = "Kích hoạt Bring Item", Callback = function(v) Config.BringItem = v end})
TabMain:CreateDropdown({Name = "Danh sách vật phẩm", Options = {"None", "Vàng", "Bạc", "Súng", "Rìu", "Kiếm", "Than", "Bom", "Mặt nạ", "Dầu của boss Tesla"}, Callback = function(o) Config.SelectedBring = o[1] end})
TabFarm:CreateToggle({Name = "Auto Farm Bond", Callback = function(v) Config.AutoFarmBond = v end})
TabFarm:CreateToggle({Name = "Auto Farm Tiền", Callback = function(v) Config.AutoFarmMoney = v end})
TabCB:CreateToggle({Name = "Silent Aim", Callback = function(v) Config.SilentAim = v end})

-- [TAB: SETTINGS]
TabST:CreateButton({Name = "SERVER HOP (THỦ CÔNG)", Callback = function() 
    local s = _0xS[1]:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..game.PlaceId.."/servers/Public?limit=100")).data
    for _, v in pairs(s) do if v.playing < v.maxPlayers and v.id ~= game.JobId then _0xS[2]:TeleportToPlaceInstance(game.PlaceId, v.id) break end end
end})
TabST:CreateToggle({Name = "Anti-AFK Protocol", Callback = function(v) Config.AntiAFK = v end})
TabST:CreateToggle({Name = "Identity Spoof (hacker11111)", Callback = function(v) Config.FakeName = v end})
TabST:CreateButton({Name = "DESTROY GUI", Callback = function()
    _0xL:CreateKeySystem({Name = "BẠN MUỐN TẮT?", Note = "Nhập 'Có' để tắt.", Key = {"Có"}, OnSuccess = function() _0xL:Destroy() end})
end})

-- [SYSTEM LOOP: ESP & NOCLIP]
_0xS[3].RenderStepped:Connect(function()
    if Config.Noclip and _0xP.Character then
        for _, v in pairs(_0xP.Character:GetDescendants()) do if v:IsA("BasePart") then v.CanCollide = false end end
    end
    -- ESP Logic Restored
    for _, v in pairs(workspace:GetDescendants()) do
        if v:FindFirstChild("Humanoid") and v:FindFirstChild("Head") then
            local n = v.Name:lower()
            if Config.ESP_Zombie and n:find("zombie") then createESP(v.Head, Color3.fromRGB(0,255,0), "Zombie")
            elseif Config.ESP_Werewolf and (n:find("werewolf") or n:find("wolf")) then createESP(v.Head, Color3.fromRGB(255,0,0), "Werewolf")
            elseif Config.ESP_Vampire and n:find("vampire") then createESP(v.Head, Color3.fromRGB(255,255,255), "Vampire")
            elseif Config.ESP_Bandit and n:find("bandit") then createESP(v.Head, Color3.fromRGB(255,255,0), "Bandit") end
        end
        if Config.ESP_Items and (v.Name == "Bond" or v.Name == "BondNote") then
            createESP(v, Color3.fromRGB(0,255,255), "BOND")
        end
    end
end)

-- [FARM & BRING LOOP (GIỮ NGUYÊN)]
task.spawn(function()
    while true do task.wait(0.3)
        local r = _0xP.Character and _0xP.Character:FindFirstChild("HumanoidRootPart")
        if not r then continue end
        if Config.BringItem and Config.SelectedBring ~= "None" then
            local t = _0xM[Config.SelectedBring]
            for _, o in pairs(workspace:GetDescendants()) do
                if o.Name:lower():find(t:lower()) then
                    pcall(function() o.CFrame = r.CFrame * CFrame.new(0,-2,0) fireproximityprompt(o:FindFirstChildOfClass("ProximityPrompt") or o.Parent:FindFirstChildOfClass("ProximityPrompt")) end)
                end
            end
        end
        local ft = nil
        if Config.AutoFarmBond then for _, v in pairs(workspace:GetDescendants()) do if v.Name == "Bond" or v.Name == "BondNote" then ft = v break end end
        elseif Config.AutoFarmMoney then for _, v in pairs(workspace:GetDescendants()) do if v.Name:find("Gold") or v.Name:find("Silver") then ft = v break end end end
        if ft then pcall(function() r.CFrame = ft.CFrame * CFrame.new(0,2,0) fireproximityprompt(ft:FindFirstChildOfClass("ProximityPrompt") or ft.Parent:FindFirstChildOfClass("ProximityPrompt")) end) end
    end
end)

_0xL:LoadConfiguration()
