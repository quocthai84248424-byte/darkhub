--[[
    DARK HUB by ilovedog
    Dead Rail Ultimate Edition - Wind UI Port
    Key: AUTOCLICLFULL22
]]

local _0xX = {game, pcall, loadstring, next, string.char, task, workspace, game:GetService("HttpService"), game:GetService("TeleportService"), getrawmetatable, setreadonly, newcclosure, setclipboard}
local WindUI = _0xX[3](_0xX[1]:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/refs/heads/main/main.lua"))()

-- [CONFIG GỐC INTEGRATION]
local Config = {
    AutoFarm = false,
    FarmSpeed = 150,
    ServerHop = false,
    Noclip = false,
    SilentAim = false,
    ESP_Zombie = false,
    ESP_Werewolf = false,
    ESP_Vampire = false,
    ESP_Bandit = false,
    ESP_Items = false,
    FakeName = false -- Mới thêm
}

local lp = _0xX[1]:GetService("Players").LocalPlayer
local Camera = workspace.CurrentCamera

-- [WINDOW SETUP]
local Window = WindUI:CreateWindow({
    Title = "DARK HUB :: VOID",
    Icon = "rbxassetid://10723415693",
    Author = "ilovedog",
    Folder = "DarkHub_DeadRail",
    KeySystem = true,
    KeySettings = {
        Title = "SECURITY_CHECK",
        Description = "Key: AUTOCLICLFULL22",
        Key = {"AUTOCLICLFULL22"}, -- Key mới của bro
        Action = function() _0xX[13]("https://discord.gg/HfVYnr8z") end
    }
})

local TabAF = Window:Tab({Title = "AF", Icon = "terminal"})
local TabCB = Window:Tab({Title = "CB", Icon = "shield-alert"})
local TabVS = Window:Tab({Title = "VS", Icon = "scan-eye"})
local TabST = Window:Tab({Title = "ST", Icon = "command"})

-- [SILENT AIM & IDENTITY SPOOF LOGIC]
local mt = _0xX[10](game)
local oldIndex = mt.__index
_0xX[11](mt, false)
mt.__index = _0xX[12](function(self, idx)
    -- Fake Name
    if Config.FakeName and (idx == "DisplayName" or idx == "Name") and self == lp then
        return "hacker11111"
    end
    -- Silent Aim
    if Config.SilentAim and idx == "Hit" then
        local target = nil
        local shortestDist = math.huge
        for _, v in pairs(_0xX[7]:GetDescendants()) do
            if v:FindFirstChild("Humanoid") and v:FindFirstChild("Head") and v ~= lp.Character then
                local screenPos, onScreen = Camera:WorldToViewportPoint(v.Head.Position)
                if onScreen then
                    local dist = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
                    if dist < 500 and dist < shortestDist then
                        shortestDist = dist
                        target = v.Head
                    end
                end
            end
        end
        if target then return target.CFrame end
    end
    return oldIndex(self, idx)
end)
_0xX[11](mt, true)

-- [ESP & NOCLIP RENDER]
_0xX[1]:GetService("RunService").RenderStepped:Connect(function()
    if Config.Noclip and lp.Character then
        for _, v in pairs(lp.Character:GetDescendants()) do
            if v:IsA("BasePart") then v.CanCollide = false end
        end
    end
end)

-- [AUTO FARM LOGIC]
local function startUltraFarm()
    task.spawn(function()
        while Config.AutoFarm do
            task.wait(0.1)
            local root = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
            if not root then continue end
            local target = nil
            for _, v in pairs(_0xX[7]:GetDescendants()) do
                if v.Name == "Bond" or v.Name == "BondNote" then
                    target = v:IsA("BasePart") and v or v:FindFirstChildWhichIsA("BasePart")
                    if target then break end
                end
            end
            if target then
                local dist = (root.Position - target.Position).Magnitude
                local tween = game:GetService("TweenService"):Create(root, TweenInfo.new(dist/Config.FarmSpeed, Enum.EasingStyle.Linear), {CFrame = target.CFrame * CFrame.new(0, 2, 0)})
                tween:Play()
                tween.Completed:Wait()
                local p = target:FindFirstChildOfClass("ProximityPrompt") or target.Parent:FindFirstChildOfClass("ProximityPrompt")
                if p then fireproximityprompt(p) end
            elseif Config.ServerHop then
                local res = _0xX[8]:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..game.PlaceId.."/servers/Public?limit=100")).data
                for _, v in pairs(res) do if v.playing < v.maxPlayers and v.id ~= game.JobId then _0xX[9]:TeleportToPlaceInstance(game.PlaceId, v.id) break end end
                break
            end
        end
    end)
end

-- [WIND UI CONTROLS]
TabAF:Toggle({Title = "Auto Farm Bond", Callback = function(v) Config.AutoFarm = v; if v then startUltraFarm() end end})
TabAF:Toggle({Title = "Auto Server Hop", Callback = function(v) Config.ServerHop = v end})

TabCB:Toggle({Title = "Silent Aim", Callback = function(v) Config.SilentAim = v end})

TabVS:Toggle({Title = "ESP Items (Bond)", Callback = function(v) Config.ESP_Items = v end})
TabVS:Toggle({Title = "ESP Entities", Callback = function(v) Config.ESP_Zombie = v; Config.ESP_Werewolf = v; Config.ESP_Vampire = v; Config.ESP_Bandit = v end})

TabST:Toggle({Title = "IDENTITY SPOOF (hacker11111)", Callback = function(v) Config.FakeName = v end})
TabST:Button({Title = "ACTIVATE FLY PROTOCOL", Callback = function() _0xX[3](_0xX[1]:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.lua"))() end})
TabST:Toggle({Title = "NOCLIP MODE", Callback = function(v) Config.Noclip = v end})
TabST:Slider({Title = "Farm Speed", Min = 50, Max = 300, Default = 150, Callback = function(v) Config.FarmSpeed = v end})

WindUI:Notify({Title = "DARK HUB", Content = "Key Accepted. Welcome, " .. lp.Name})
