local _0xCheck = "ilovedog1901ilovecat5551"
local _0xConfig = {
    Author = "ilovedog1901ilovecat5551",
    Discord = "https://discord.gg/xawrhjKP",
    MainImg = "rbxassetid://18820063991", -- Background Furina
    IconImg = "rbxassetid://18820120015"  -- Icon Furina
}

local _0xMT = getrawmetatable(game)
local _0xNC = _0xMT.__namecall
setreadonly(_0xMT, false)
_0xMT.__namecall = newcclosure(function(self, ...)
    local m = getnamecallmethod()
    if not checkcaller() and (m == "Kick" or m == "Log" or m == "Report") then return nil end
    return _0xNC(self, ...)
end)
setreadonly(_0xMT, true)

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local _LP = game.Players.LocalPlayer
local _RS = game:GetService("ReplicatedStorage")

local Window = Fluent:CreateWindow({
    Title = "DARK HUB | FORSAKEN",
    SubTitle = "by " .. _0xConfig.Author,
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = false,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl
})

local function _0xStyle()
    local _0xBg = Instance.new("ImageLabel", Window.Main)
    _0xBg.Size = UDim2.new(1, 0, 1, 0)
    _0xBg.Image = _0xConfig.MainImg
    _0xBg.ImageTransparency = 0.8
    _0xBg.ZIndex = -1
    
    local _0xBtn = Instance.new("ImageButton", game:GetService("CoreGui"))
    _0xBtn.Name = "FurinaIcon"
    _0xBtn.Size = UDim2.new(0, 55, 0, 55)
    _0xBtn.Position = UDim2.new(0.05, 0, 0.15, 0)
    _0xBtn.Image = _0xConfig.IconImg
    _0xBtn.BackgroundTransparency = 1
    _0xBtn.Draggable = true
    _0xBtn.Active = true
    Instance.new("UICorner", _0xBtn).CornerRadius = UDim.new(1, 0)
    _0xBtn.MouseButton1Click:Connect(function() Window:Minimize() end)
end
_0xStyle()

local Tabs = {
    Info = Window:AddTab({ Title = "Info", Icon = "info" }),
    Farm = Window:AddTab({ Title = "Farm", Icon = "shovels" }),
    Main = Window:AddTab({ Title = "Main", Icon = "swords" }),
    Player = Window:AddTab({ Title = "Player", Icon = "user" }),
    Visual = Window:AddTab({ Title = "Visual", Icon = "eye" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

local _0xO = Fluent.Options

Tabs.Info:AddParagraph({Title = "DARK HUB", Content = "Script by: " .. _0xConfig.Author .. "\nDiscord: " .. _0xConfig.Discord})

Tabs.Farm:AddSection("**SURVIVOR FARM**")
Tabs.Farm:AddToggle("AutoFixGen", {Title = "Auto Fix Gen (Teleport)", Default = false})
Tabs.Farm:AddInput("GenDelay", {Title = "Delay Time", Default = "1", Numeric = true})
Tabs.Farm:AddToggle("RepairGen", {Title = "Repair Gen (Walk Mode)", Default = false})
Tabs.Farm:AddInput("WalkGenDelay", {Title = "Walk Delay Time", Default = "1", Numeric = true})

Tabs.Farm:AddSection("**KILLER FARM**")
Tabs.Farm:AddToggle("AutoKillV1", {Title = "Auto Kill Survivor (Teleport)", Default = false})
Tabs.Farm:AddToggle("AutoKillV2", {Title = "Auto Kill Survivor (Walk)", Default = false})

Tabs.Main:AddSection("**SHEDLETSKY**")
Tabs.Main:AddToggle("AutoSlash", {Title = "Auto Slash", Default = false})
Tabs.Main:AddToggle("AutoEatChicken", {Title = "Auto Eat Chicken", Default = false})

Tabs.Main:AddSection("**GUEST**")
Tabs.Main:AddToggle("AutoBlock", {Title = "Auto Block (Fast)", Default = false})
Tabs.Main:AddInput("BlockRange", {Title = "Block Range", Default = "15", Numeric = true})
Tabs.Main:AddToggle("VisualRange", {Title = "Visual Range Block", Default = false})
Tabs.Main:AddToggle("AutoPunch", {Title = "Auto Punch After Block", Default = false})
Tabs.Main:AddToggle("AimPunch", {Title = "Aim Punch (Accurate)", Default = false})

Tabs.Main:AddSection("**TWO TIME**")
Tabs.Main:AddToggle("AutoBackstab", {Title = "Auto Backstab (2+1)", Default = false})
Tabs.Main:AddInput("BackRange", {Title = "Back Range (0-5)", Default = "5", Numeric = true})

Tabs.Main:AddSection("**ELIOT**")
Tabs.Main:AddToggle("AutoGivePizza", {Title = "Auto Pizza (HP < 30%)", Default = false})

Tabs.Player:AddSection("**ANIMATION**")
local _0xAnimTable = {
    ["Slasher"] = "rbxassetid://0", 
    ["VIP Killer"] = "rbxassetid://0"
}

local _0xDropdown = Tabs.Player:AddDropdown("AnimSelect", {
    Title = "Select Animation (Auto Collect)",
    Values = {"Slasher", "Coolkid", "1x1x1x1", "John Dough", "Noli", "Guest 666", "VIP Killer"},
    Default = "Slasher"
})

Tabs.Player:AddButton({
    Title = "Apply Animation",
    Callback = function()
        local target = _0xO.AnimSelect.Value
        pcall(function()
            -- Logic thu thập ID thực tế từ các NPC hoặc Player Killer trong server
            for _, v in pairs(game.Players:GetPlayers()) do
                if v.Character and v.Character:FindFirstChild("Animate") then
                    local id = v.Character.Animate.idle.Animation1.AnimationId
                    _0xAnimTable[v.Name] = id
                end
            end
            -- Áp dụng ID đã thu thập
            _LP.Character.Animate.idle.Animation1.AnimationId = _0xAnimTable[target] or _LP.Character.Animate.idle.Animation1.AnimationId
        end)
    end
})

Tabs.Player:AddSection("**MOVEMENT**")
Tabs.Player:AddInput("WalkSpeed", {Title = "Speed (Default 24)", Default = "24", Numeric = true})

Tabs.Visual:AddSection("**VISUALS**")
Tabs.Visual:AddToggle("ESPSurv", {Title = "ESP Survivor", Default = false})
Tabs.Visual:AddToggle("ESPKiller", {Title = "ESP Killer", Default = false})
Tabs.Visual:AddToggle("ESPGen", {Title = "ESP Generator", Default = false})

-- Logic Auto Fix Gen Teleport chuẩn xác
task.spawn(function()
    while task.wait(0.1) do
        if _0xO.AutoFixGen.Value then
            for _, v in pairs(workspace:GetChildren()) do
                if v.Name == "Generator " and v:FindFirstChild("HumanoidRootPart") then
                    _LP.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                    _RS.Events.Interact:FireServer(v)
                    task.wait(tonumber(_0xO.GenDelay.Value) or 1)
                    _RS.Events.CompleteGen:FireServer()
                end
            end
        end
    end
end)

-- Logic Guest Hub Block
task.spawn(function()
    game:GetService("RunService").RenderStepped:Connect(function()
        if _0xO.AutoBlock.Value then
            local r = tonumber(_0xO.BlockRange.Value) or 15
            for _, k in pairs(game.Players:GetPlayers()) do
                if k ~= _LP and k.Character and (k.Character.HumanoidRootPart.Position - _LP.Character.HumanoidRootPart.Position).Magnitude <= r then
                    _RS.Events.Block:FireServer()
                    if _0xO.AutoPunch.Value then
                        task.wait(0.7)
                        _RS.Events.Punch:FireServer()
                    end
                end
            end
        end
    end)
end)

Tabs.Info:Select()
